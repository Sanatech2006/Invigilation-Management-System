<!-- IMS/templates/view_schedule/view_schedule.html -->
{% extends 'base/base.html' %}
{% load static %}

{% block content %}
<div class="container mx-auto px-4 py-8">

    <!-- Top Row: Title + Buttons -->
    <div class="flex justify-between items-center mb-6">
        <h1 class="text-2xl font-bold text-gray-800">View Schedule</h1>
        <div class="flex space-x-2">
            <!-- Download Excel -->
            <a href="{% url 'download_schedule_excel' %}" 
               class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
                Download Excel
            </a>
            <!-- Add Staff -->
            <a href="#" 
               class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                Add Staff
            </a>
        </div>
    </div>
    <!-- Filters -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Date</label>
            <select id="filterStaffName" class="w-full border rounded px-3 py-2"></select>
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Department Category</label>
            <select id="filterDeptCategory" class="w-full border rounded px-3 py-2"></select>
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Staff Department</label>
            <select id="filterStaffDept" class="w-full border rounded px-3 py-2"></select>
        </div>
    </div>

</div>



  <!-- Table -->
  <div class="bg-white shadow-md rounded-lg overflow-hidden">
    <div class="overflow-y-auto max-h-[500px] border border-gray-300 rounded-lg">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-100">
          <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">Serial No</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">Schedule Date</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">Session</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">Hall No</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">Hall Department</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">Staff ID</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">Staff Name</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">Designation</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">Staff Department</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">Dept Category</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">Double Session</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">Actions</th>
          </tr>
        </thead>

        <tbody class="bg-white divide-y divide-gray-200">
          {% for schedule in schedules %}
          <tr>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 font-medium">{{ schedule.serial_number }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 font-medium">{{ schedule.date }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 font-medium">{{ schedule.session|default:"-" }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 font-medium">{{ schedule.hall_no }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 font-medium">{{ schedule.hall_department }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 font-medium">{{ schedule.staff_id|default:"-" }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 font-medium">{{ schedule.name|default:"-" }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 font-medium">{{ schedule.designation|default:"-" }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 font-medium">{{ schedule.staff_category|default:"-" }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 font-medium">{{ schedule.dept_category|default:"-" }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 font-medium">
              {% if schedule.double_session %}Yes{% else %}No{% endif %}
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
              <div class="flex items-center space-x-3">
                <!-- Edit -->
                <button type="button" title="Edit">
                  <svg xmlns="http://www.w3.org/2000/svg"
                       class="h-5 w-5 text-blue-600"
                       fill="none" viewBox="0 0 24 24"
                       stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536M9 13l6-6 3 3-6 6H9v-3z" />
                  </svg>
                </button>
                <!-- Delete -->
                <button type="button" title="Delete">
                  <svg xmlns="http://www.w3.org/2000/svg"
                       class="h-5 w-5 text-red-600"
                       fill="none" viewBox="0 0 24 24"
                       stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                  </svg>
                </button>
              </div>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="12" class="px-6 py-4 text-center text-sm text-gray-500">
              No schedule records found.
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div class="bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6">
      <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
        <p class="text-sm text-gray-700">
          Showing <span class="font-medium">{{ dates|length }}</span> results
        </p>
      </div>
    </div>
  </div>

  <script src="{% static 'js/view_schedule.js' %}"></script>
</div>
{% endblock %}
