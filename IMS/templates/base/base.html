{% load static %}
<!DOCTYPE html>
<html lang="en" class="h-full bg-gray-100">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IMS - {% block title %}{% endblock %}</title>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />

    <!-- Tailwind CSS -->
    <link href="{% static 'css/dist/output.css' %}" rel="stylesheet">
    
    <link href="{% static 'css/src/components.css' %}" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js"></script>

    <style>
        .sidebar-link:hover {
            background-color: #e5e7eb; /* Tailwind gray-200 */
            color: #111827;           /* Tailwind gray-900 */
        }
        .active-nav-item {
            background-color: #2563eb; /* Tailwind blue-600 */
            color: white;
        }
    </style>

    {% block extra_css %}{% endblock %}
    
</head>
<body class="h-full">
    
    <!-- Mobile menu button -->
     <button id="mobile-menu-button" class="md:hidden fixed top-4 left-4 z-50 p-2 rounded-md text-gray-700 bg-white shadow-lg">
        <i class="fas fa-bars text-xl"></i>
    </button>

    
    <div id="sidebar" class="sidebar">
    <div class="sidebar-header">
        <h4>IMS</h4>
    </div>
    <nav class="sidebar-nav">
        {% if user_role == 1 %}
        <!-- Role 1 (Admin): Show all menus -->
        <a href="{% url 'dashboard:dashboard' %}"
           class="sidebar-link menu-item dashboard-menu {% if request.path == '/' %}active-nav-item{% endif %}">
            <i class="sidebar-icon fas fa-tachometer-alt"></i> Dashboard
        </a>
        <a href="{% url 'staff:staff-management' %}" 
           class="sidebar-link menu-item {% if 'staff' in request.path %}active-nav-item{% endif %}">
            <i class="sidebar-icon fas fa-users"></i> Staff Management
        </a>
        <a href="{% url 'hall_management' %}" 
           class="sidebar-link menu-item {% if 'hall/management' in request.path %}active-nav-item{% endif %}">
            <i class="sidebar-icon fas fa-school"></i> Hall Management
        </a>
        <a href="{% url 'exam_dates:index' %}" 
           class="sidebar-link menu-item {% if 'exam-dates' in request.path %}active-nav-item{% endif %}">
            <i class="sidebar-icon fas fa-calendar-alt"></i> Exam Dates
        </a>
        <a href="{% url 'generate_schedule' %}" 
           class="sidebar-link menu-item {% if 'generate-schedule' in request.path %}active-nav-item{% endif %}">
            <i class="sidebar-icon fas fa-cogs"></i> Generate Schedule
        </a>
        <a href="{% url 'view_schedule' %}" 
           class="sidebar-link menu-item {% if 'view-schedule' in request.path %}active-nav-item{% endif %}">
            <i class="sidebar-icon fas fa-eye"></i> View Schedule
        </a>
<a href="{% url 'manual_assignment:manual_assignment' %}" 
   class="sidebar-link menu-item {% if 'manual-assignment' in request.path %}active-nav-item{% endif %}">
    <i class="sidebar-icon fas fa-tasks"></i> Manual Assignment
</a>
        <a href="{% url 'reports:admin_reports' %}" 
           class="sidebar-link menu-item {% if 'reports' in request.path %}active-nav-item{% endif %}">
            <i class="sidebar-icon fas fa-chart-bar"></i> Reports
        </a>
        <a href="{% url 'settings:settings_home' %}" 
           class="sidebar-link menu-item {% if 'settings' in request.path and 'invigilation_settings' not in request.path %}active-nav-item{% endif %}">
            <i class="sidebar-icon fas fa-sliders-h"></i> Settings
        </a>
        {% endif %}

        {% if user_role == 2 %}
        <!-- Role 2 menu -->
        <a href="{% url 'dashboard:dashboard' %}" 
           class="sidebar-link menu-item dashboard-menu {% if request.path == '/' %}active-nav-item{% endif %}">
            <i class="sidebar-icon fas fa-tachometer-alt"></i> Dashboard
        </a>
        
        <a href="{% url 'reports:reports' %}" 
           class="sidebar-link menu-item {% if 'reports' in request.path %}active-nav-item{% endif %}">
            <i class="sidebar-icon fas fa-chart-bar"></i> Reports
        </a>
        {% elif user_role == 3 %}
        <!-- Role 3 menu -->
        <a href="{% url 'dashboard:dashboard' %}" 
           class="sidebar-link menu-item dashboard-menu {% if request.path == '/' %}active-nav-item{% endif %}">
            <i class="sidebar-icon fas fa-tachometer-alt"></i> Dashboard
        </a>
        <a href="{% url 'reports:hod_reports' %}" 
           class="sidebar-link menu-item {% if 'reports' in request.path %}active-nav-item{% endif %}">
            <i class="sidebar-icon fas fa-chart-bar"></i> Reports
        </a>
        {% elif user_role == 4 %}
        <!-- Role 4 (HOD) menu -->
        <a href="{% url 'dashboard:dashboard' %}" 
           class="sidebar-link menu-item dashboard-menu {% if request.path == '/' %}active-nav-item{% endif %}">
            <i class="sidebar-icon fas fa-tachometer-alt"></i> Dashboard
        </a>
        <a href="{% url 'reports:reports' %}" 
   id="reports-menu-item"
   class="sidebar-link menu-item {% if 'reports' in request.path %}active-nav-item{% endif %}">
    <i class="sidebar-icon fas fa-chart-bar"></i> Reports
</a>

        {% endif %}

        <div class="sidebar-logout">
            <a href="{% url 'logout' %}" class="sidebar-link logout" onclick="openLogoutModal();">
                <i class="sidebar-icon fas fa-sign-out-alt"></i> Logout
            </a>
        </div>
    </nav>
</div>


<div id="logoutModal" class="modal" tabindex="-1" role="dialog" style="display:none;">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Confirm Logout</h5>
        <button type="button" class="close" onclick="closeLogoutModal()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to logout?</p>
      </div>
      <div class="modal-footer">
        <a href="{% url 'logout' %}" class="btn btn-primary">Yes</a>
        <button type="button" class="btn btn-secondary" onclick="closeLogoutModal()">Cancel</button>
      </div>
    </div>
  </div>
</div>



    <main class="md:ml-64 p-4 md:p-6">
        {% block content %}{% endblock %}
    </main>

    <script src="{% static 'js/sidebar.js' %}"></script>
    {% block extra_js %}{% endblock %}
     {% block javascript %}{% endblock %}
     <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</body>
</html>
